<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>jQuery Mobile: Theme Download</title>
	<link rel="stylesheet" href="./css/themes/toysfortots.css" />
	<link rel="stylesheet" href="./css/themes/jquery.mobile.icons.min.css" />
	<link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.5/jquery.mobile.structure-1.4.5.min.css" />
	<script src="http://code.jquery.com/jquery-1.11.1.min.js"></script>
	<script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
	<script src="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
<style>
  .ui-autocomplete-loading {
    background: white url("ui-anim_basic_16x16.gif") right center no-repeat;
  }
  #custom-border-radius .ui-btn-icon-notext.ui-corner-all {
    -webkit-border-radius: .3125em;
    border-radius: .3125em;
}
  </style>
</head>
<body>
	<div data-role="page" id="main" data-theme="a">
		<div data-role="header" data-position="inline">
			<h1>Indiana Toys for Tots</h1>
		</div>
		<div data-role="content" data-theme="a">
			<script>
  $(function() {
	$.getJSON("database.json", function (data) {
			var outArray = [];
			$.each(data, function(index){
					outArray.push(index);
			});//end each
		$( "#county" ).autocomplete({
    		source: outArray,
			minLength: 3,
			delay: 1000
		});//end autocomplete
  });//end getJSON
});

function geoFindMe() {
  var output = document.getElementById("out");

  if (!navigator.geolocation){
    console.log("Geolocation is not supported by your browser");
    return;
  }

  function success(position) {
    var latitude  = position.coords.latitude;
    var longitude = position.coords.longitude;
   $.getJSON('http://nominatim.openstreetmap.org/reverse?format=json&addressdetails=1&lat='+latitude+'&lon='+longitude,
       function (data){
         var county = data.address.county;
         county = county.replace("County", "");
		 $("#county").val(county);
      });

  };

  function error() {
    console.log("Unable to retrieve your location");
  };
  navigator.geolocation.getCurrentPosition(success, error);
}//end geoFindMe

			</script>
			<p><a href="#newelement" onclick="countyFunction()" class="ui-btn ui-shadow ui-corner-all" data-rel="dialog" data-transition="pop">Show page</a></p>
			<p>
			<div class="ui-widget">
			<label for="county">Enter a County</label>
			<input id="county" class="ui-content" />	
				<div data-role="controlgroup" data-type="horizontal">
    			<a href="#" class="ui-btn ui-corner-all ui-btn-inline ui-icon-location  ui-alt-icon ui-btn-icon-left" onclick="geoFindMe()">Current Location</a>
				<a href="#newelement" data-rel="dialog" data-transition="pop" class="ui-btn ui-corner-all ui-btn-inline ui-icon-search ui-alt-icon ui-btn-icon-left" onclick="countyFunction()">Search</a>
				</div>
			</div>
			</p>
	</div>
			<!-- Start of second page -->
			<script>
			function countyFunction(){
			  var mockObject = {firstName: 'Ryan', lastName: 'Boman', ages:[30,31,32]};
			  	var out="<div data-role='page' data-theme='a' id='newelement'>";
				 out+="<div data-role='header' data-theme='a'>";
				 out+="<h1>jQuery dialog</h1>";
				 out+="</div>";
				 out+="<div data-theme='a' data-role='content' data-form='ui-body-a' class='ui-body ui-body-a ui-corner-all'>";
			   $.each(mockObject, function(key, value){
			     //console.log(key + ":" + value+"\n");
				 out+=key + ":" + value+"<br />";
			   });

				 out+="</div>";
				 out+="<div data-role='footer'><h4>Page Footer</h4></div>";
				//console.log(out);
				
				
			  $(main).after(out);
			}
			</script>
</body>
</html>
